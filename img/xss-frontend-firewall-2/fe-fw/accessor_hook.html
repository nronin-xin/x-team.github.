<!doctype html>
<html>
<head>
	<meta charset="utf-8" />
</head>
<body>
	<script>
		var raw_setter = HTMLScriptElement.prototype.__lookupSetter__('src');

		HTMLScriptElement.prototype.__defineSetter__('src', function(url) {
			if (/xss/.test(url)) {
				if (confirm('试图加载可疑模块：\n\n' + url + '\n\n是否拦截？')) {
					return;
				}				
			}
			raw_setter.call(this, url);
		});
	</script>

	<button id="btn">创建脚本</button>
	<script>
		btn.onclick = function() {
			var el = document.createElement('script');
			el.src = 'http://www.etherdream.com/xss/out.js?dynamic';
			document.body.appendChild(el);
		};
	</script>
</body>
</html>